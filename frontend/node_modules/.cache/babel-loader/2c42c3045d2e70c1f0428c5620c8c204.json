{"ast":null,"code":"import _slicedToArray from \"/mnt/c/Users/teste/project/syncimage/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/mnt/c/Users/teste/project/syncimage/frontend/src/componentes/Upload/Config/index.js\";\nimport React, { useState, useMemo } from 'react';\nimport axios from 'axios';\nimport ValidaForms from \"../../../componentes/ValidaForms\";\nimport Alert from \"../../../componentes/Alert\";\nimport CompressImage from \"../../../componentes/compress\";\nimport loadingSvg from \"../../../assets/loading.svg\";\nconst user_id = localStorage.getItem(\"user_id\");\nexport default function Config(props) {\n  // Form\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        title = _useState2[0],\n        setTitle = _useState2[1];\n\n  const _useState3 = useState('none'),\n        _useState4 = _slicedToArray(_useState3, 2),\n        categoria = _useState4[0],\n        setCategoria = _useState4[1];\n\n  const _useState5 = useState('publico'),\n        _useState6 = _slicedToArray(_useState5, 2),\n        privacy = _useState6[0],\n        setPrivacy = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        description = _useState8[0],\n        setDescription = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        descriptionNone = _useState10[0],\n        setDescriptionNone = _useState10[1];\n\n  const _useState11 = useState('Desativado'),\n        _useState12 = _slicedToArray(_useState11, 2),\n        editionON = _useState12[0],\n        setEditionOn = _useState12[1]; // Categorias\n\n\n  const _useState13 = useState([]),\n        _useState14 = _slicedToArray(_useState13, 2),\n        listCategory = _useState14[0],\n        setListCategory = _useState14[1]; // alert\n\n\n  const _useState15 = useState(false),\n        _useState16 = _slicedToArray(_useState15, 2),\n        alertDisplay = _useState16[0],\n        setAlertDisplay = _useState16[1];\n\n  const _useState17 = useState([]),\n        _useState18 = _slicedToArray(_useState17, 2),\n        alertcontent = _useState18[0],\n        setAlertContent = _useState18[1]; // loading\n\n\n  const _useState19 = useState('Salvar'),\n        _useState20 = _slicedToArray(_useState19, 2),\n        loading = _useState20[0],\n        setLoading = _useState20[1];\n\n  useMemo(async () => {\n    try {\n      const response = await axios.get(\"http://localhost:3001/api/category/\".concat(user_id));\n\n      if (response.data.category === null) {\n        setListCategory(['none']);\n      } else {\n        setListCategory(response.data.category);\n      }\n    } catch (error) {\n      // Tratar erro\n      console.log({\n        error\n      });\n    }\n  }, []);\n  const image = props.data;\n\n  async function handleUpload(e) {\n    e.preventDefault();\n    setLoading('loading');\n\n    if (descriptionNone === true) {\n      setDescription('Description none');\n    }\n\n    const validaForm = await ValidaForms([{\n      $campo: title,\n      $nomeCampo: 'titulo',\n      $rules: {\n        min: 4,\n        max: 16,\n        type: String,\n        required: true\n      }\n    }, {\n      $campo: categoria,\n      $nomeCampo: 'categoria',\n      $rules: {\n        type: String,\n        required: true\n      }\n    }, {\n      $campo: privacy,\n      $nomeCampo: 'privacidade',\n      $rules: {\n        type: String,\n        required: true\n      }\n    }, {\n      $campo: description,\n      $nomeCampo: 'Descrição',\n      $rules: {\n        min: 8,\n        max: 300,\n        type: String,\n        required: true\n      }\n    }, {\n      $campo: editionON,\n      $nomeCampo: 'Edição automatica',\n      $rules: {\n        type: Boolean,\n        required: false\n      }\n    }]);\n\n    if (validaForm !== false) {\n      setAlertContent({\n        title: \"Falha ao realizar upload\",\n        message: validaForm[0],\n        type: \"fail\"\n      });\n      setLoading('Salvar');\n      setAlertDisplay(true);\n    } else {\n      if (!image) {\n        setAlertContent({\n          title: \"Falha ao fazer upload\",\n          message: \"Imagem invalida\",\n          type: \"fail\"\n        });\n        setAlertDisplay(true);\n      }\n\n      if (image) {\n        if (image.size >= 3000000) {\n          setAlertContent({\n            title: \"Falha ao fazer upload\",\n            message: \"O Tamanho da imagem não deve exceder 5mb\",\n            type: \"fail\"\n          });\n          setAlertDisplay(true);\n        }\n\n        const info = {\n          user_id,\n          title,\n          description,\n          category: categoria,\n          privacy\n        };\n        const result = await CompressImage(image, 1);\n        const baseString = result.data;\n\n        try {\n          const response = await axios.post('http://localhost:3001/api/image', {\n            image: baseString,\n            info\n          });\n          setAlertContent({\n            title: \"Sucesso ao fazer upload\",\n            message: \"A imagem foi adicionada a sua galeria!\",\n            type: \"sucess\"\n          });\n          setAlertDisplay(true);\n          console.log(response);\n        } catch (error) {\n          setAlertContent({\n            title: \"Falha ao fazer upload\",\n            message: \"Tente novamente!\",\n            type: \"fail\"\n          });\n          setAlertDisplay(true);\n        }\n      }\n    }\n  }\n\n  function handleCancelar(e) {\n    e.preventDefault();\n  } // --------------------------------------------------------------------------------------\n\n\n  if (props.name === 'option' || !props.name) {\n    return React.createElement(\"div\", {\n      className: \"container-option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"title\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Titulo da imagem *\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"title\",\n      className: \"f-input\",\n      onChange: event => setTitle(event.target.value),\n      value: title !== '' ? title : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"category\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Escolher categoria\"), React.createElement(\"select\", {\n      id: \"category\",\n      onChange: event => setCategoria(event.target.value),\n      value: categoria !== '' ? categoria : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, listCategory ? listCategory.map((item, i) => React.createElement(\"option\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, item)) : '')), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"privacy\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"Definir privacidade\"), React.createElement(\"select\", {\n      id: \"privacy\",\n      onChange: event => setPrivacy(event.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"publico\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"Publico\"), React.createElement(\"option\", {\n      value: \"privado\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Privado\"))), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: handleUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, loading === 'loading' ? React.createElement(\"img\", {\n      src: loadingSvg,\n      className: \"loading\",\n      alt: \"Loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }) : loading), React.createElement(\"button\", {\n      className: \"btn btn-none\",\n      onClick: handleCancelar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Cancelar\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"Teve algum problema? tente o \", React.createElement(\"a\", {\n      href: \"/#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"upload normal\")), React.createElement(Alert, {\n      content: alertcontent,\n      display: alertDisplay,\n      onClose: e => {\n        setAlertDisplay(false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }));\n  }\n\n  if (props.name === 'description') {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"container-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"description\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"Defina um pequeno texto como descri\\xE7\\xE3o para sua imagem *\"), React.createElement(\"textarea\", {\n      id: \"description\",\n      className: \"f-textarea\",\n      onChange: event => setDescription(event.target.value),\n      value: description !== '' ? description : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      onClick: event => setDescriptionNone(event.target.value),\n      value: descriptionNone !== false ? descriptionNone : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"Deixar em branco\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, \"A descri\\xE7\\xE3o \\xE9 limitada a 300 caracteres, caso n\\xE3o queiera adicionar descri\\xE7\\xE3o, marque a op\\xE7\\xE3o acima.\")), React.createElement(Alert, {\n      content: alertcontent,\n      display: alertDisplay,\n      onClose: e => {\n        setAlertDisplay(false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }));\n  }\n\n  if (props.name === 'avancado') {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"container-avancado\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"editionOn\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }, \"Tratamento automatico da imagem\"), React.createElement(\"select\", {\n      id: \"editionOn\",\n      onChange: event => setEditionOn(event.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"Dasativado\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, \"Dasativado\"), React.createElement(\"option\", {\n      value: \"Ativado\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, \"Ativado\")))), React.createElement(Alert, {\n      content: alertcontent,\n      display: alertDisplay,\n      onClose: e => {\n        setAlertDisplay(false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }));\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298\n    },\n    __self: this\n  });\n}","map":{"version":3,"sources":["/mnt/c/Users/teste/project/syncimage/frontend/src/componentes/Upload/Config/index.js"],"names":["React","useState","useMemo","axios","ValidaForms","Alert","CompressImage","user_id","localStorage","getItem","Config","props","title","setTitle","categoria","setCategoria","privacy","setPrivacy","description","setDescription","descriptionNone","setDescriptionNone","editionON","setEditionOn","listCategory","setListCategory","alertDisplay","setAlertDisplay","alertcontent","setAlertContent","loading","setLoading","response","get","data","category","error","console","log","image","handleUpload","e","preventDefault","validaForm","$campo","$nomeCampo","$rules","min","max","type","String","required","Boolean","message","size","info","result","baseString","post","handleCancelar","name","event","target","value","map","item","i","loadingSvg"],"mappings":"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","sourcesContent":["import React, { useState, useMemo } from 'react';\nimport axios from 'axios';\n\nimport ValidaForms from \"../../../componentes/ValidaForms\";\nimport Alert from \"../../../componentes/Alert\";\nimport CompressImage from \"../../../componentes/compress\";\n\nimport loadingSvg from \"../../../assets/loading.svg\";\n\nconst user_id = localStorage.getItem(\"user_id\");\n\n\nexport default function Config(props) {\n\n    // Form\n    const [title, setTitle] = useState('');\n    const [categoria, setCategoria] = useState('none');\n    const [privacy, setPrivacy] = useState('publico');\n    const [description, setDescription] = useState('');\n    const [descriptionNone, setDescriptionNone] = useState(false);\n    const [editionON, setEditionOn] = useState('Desativado');\n\n    // Categorias\n    const [listCategory, setListCategory] = useState([])\n\n    // alert\n    const [alertDisplay, setAlertDisplay] = useState(false);\n    const [alertcontent, setAlertContent] = useState([])\n\n    // loading\n    const [loading, setLoading] = useState('Salvar')\n\n\n\n    useMemo(async () => {\n        try {\n            const response = await axios.get(`http://localhost:3001/api/category/${user_id}`);\n\n            if (response.data.category === null) {\n                setListCategory(['none']);\n            } else {\n                setListCategory(response.data.category);\n            }\n\n        } catch (error) {\n            // Tratar erro\n            console.log({ error })\n        }\n    }, [])\n\n    const image = props.data;\n\n\n    async function handleUpload(e) {\n        e.preventDefault();\n        setLoading('loading')\n\n        if (descriptionNone === true) {\n            setDescription('Description none');\n        }\n\n        const validaForm = await ValidaForms([\n            {\n                $campo: title, $nomeCampo: 'titulo', $rules: {\n                    min: 4,\n                    max: 16,\n                    type: String,\n                    required: true\n                }\n            },\n            {\n                $campo: categoria, $nomeCampo: 'categoria', $rules: {\n                    type: String,\n                    required: true\n                }\n            },\n            {\n                $campo: privacy, $nomeCampo: 'privacidade', $rules: {\n                    type: String,\n                    required: true\n                }\n            },\n            {\n                $campo: description, $nomeCampo: 'Descrição', $rules: {\n                    min: 8,\n                    max: 300,\n                    type: String,\n                    required: true\n                }\n            },\n            {\n                $campo: editionON, $nomeCampo: 'Edição automatica', $rules: {\n                    type: Boolean,\n                    required: false\n                }\n            },\n\n        ])\n\n        if (validaForm !== false) {\n\n            setAlertContent({\n                title: \"Falha ao realizar upload\",\n                message: validaForm[0],\n                type: \"fail\"\n            })\n            setLoading('Salvar')\n            setAlertDisplay(true);\n\n        } else {\n\n\n            if (!image) {\n                setAlertContent({\n                    title: \"Falha ao fazer upload\",\n                    message: \"Imagem invalida\",\n                    type: \"fail\"\n                })\n                setAlertDisplay(true)\n\n            }\n\n\n            if (image) {\n                if (image.size >= 3000000) {\n\n                    setAlertContent({\n                        title: \"Falha ao fazer upload\",\n                        message: \"O Tamanho da imagem não deve exceder 5mb\",\n                        type: \"fail\"\n                    })\n\n                    setAlertDisplay(true)\n\n                }\n\n\n                const info = {\n                    user_id,\n                    title,\n                    description,\n                    category: categoria,\n                    privacy,\n\n                }\n\n                const result = await CompressImage(image, 1);\n\n                const baseString = result.data;\n\n                try {\n                    const response = await axios.post('http://localhost:3001/api/image', { image: baseString, info })\n\n                    setAlertContent({\n                        title: \"Sucesso ao fazer upload\",\n                        message: \"A imagem foi adicionada a sua galeria!\",\n                        type: \"sucess\"\n                    })\n                    setAlertDisplay(true)\n                    console.log(response);\n\n                } catch (error) {\n                    setAlertContent({\n                        title: \"Falha ao fazer upload\",\n                        message: \"Tente novamente!\",\n                        type: \"fail\"\n                    })\n                    setAlertDisplay(true)\n                }\n            }\n        }\n\n    }\n\n    function handleCancelar(e) {\n        e.preventDefault();\n    }\n\n    // --------------------------------------------------------------------------------------\n\n\n    if (props.name === 'option' || !props.name) {\n\n        return (\n            <div className=\"container-option\">\n                <div className=\"form-group\">\n                    <label htmlFor=\"title\" className=\"f-label\">Titulo da imagem *</label>\n                    <input\n                        type=\"text\"\n                        id=\"title\"\n                        className='f-input'\n                        onChange={event => setTitle(event.target.value)}\n                        value={title !== '' ? title : ''}\n                    />\n                </div>\n\n                <div className=\"form-group\">\n                    <label htmlFor=\"category\" className=\"f-label\">Escolher categoria</label>\n                    <select\n                        id=\"category\"\n                        onChange={event => setCategoria(event.target.value)}\n                        value={categoria !== '' ? categoria : ''}\n                    >\n                        {listCategory ? listCategory.map((item, i) => (\n                            <option key={i}>{item}</option>\n                        )) : ''}\n                    </select>\n                </div>\n\n\n                <div className=\"form-group\">\n                    <label htmlFor=\"privacy\" className=\"f-label\">Definir privacidade</label>\n                    <select\n                        id=\"privacy\"\n                        onChange={event => setPrivacy(event.target.value)}\n                    >\n                        <option value=\"publico\">Publico</option>\n                        <option value=\"privado\">Privado</option>\n                    </select>\n                </div>\n\n                <div className=\"form-row\">\n                    <button className=\"btn btn-primary\" onClick={handleUpload}>{loading === 'loading' ? (<img src={loadingSvg} className=\"loading\" alt=\"Loading\" />) : loading}</button>\n                    <button className=\"btn btn-none\" onClick={handleCancelar}>Cancelar</button>\n                </div>\n\n                <span>Teve algum problema? tente o <a href=\"/#\">upload normal</a></span>\n                <Alert\n                    content={alertcontent}\n                    display={alertDisplay}\n                    onClose={(e) => { setAlertDisplay(false) }}\n                />\n\n\n            </div>\n\n        )\n    }\n\n\n\n    if (props.name === 'description') {\n        return (\n            <>\n                <div className=\"container-description\">\n                    <div className=\"form-group\">\n                        <label htmlFor=\"description\" className=\"f-label\">Defina um pequeno texto como descrição para sua imagem *</label>\n                        <textarea\n                            id=\"description\"\n                            className='f-textarea'\n                            onChange={event => setDescription(event.target.value)}\n                            value={description !== '' ? description : ''}\n                        >\n                        </textarea>\n                    </div>\n\n                    <div className=\"form-row\">\n                        <input type=\"checkbox\"\n                            onClick={event => setDescriptionNone(event.target.value)}\n                            value={descriptionNone !== false ? descriptionNone : false}\n                        />\n                        <span>Deixar em branco</span>\n                    </div>\n                    <span>A descrição é limitada a 300 caracteres, caso não queiera adicionar descrição, marque a opção acima.</span>\n                </div>\n                <Alert\n                    content={alertcontent}\n                    display={alertDisplay}\n                    onClose={(e) => { setAlertDisplay(false) }}\n                />\n            </>\n        )\n    }\n\n    if (props.name === 'avancado') {\n        return (\n            <>\n                <div className=\"container-avancado\">\n                    <div className=\"form-group\">\n                        <label htmlFor=\"editionOn\" className=\"f-label\">Tratamento automatico da imagem</label>\n                        <select id=\"editionOn\"\n                            onChange={event => setEditionOn(event.target.value)}\n                        >\n                            <option value=\"Dasativado\">Dasativado</option>\n                            <option value=\"Ativado\">Ativado</option>\n                        </select>\n                    </div>\n                </div>\n                <Alert\n                    content={alertcontent}\n                    display={alertDisplay}\n                    onClose={(e) => { setAlertDisplay(false) }}\n                />\n            </>\n        )\n    }\n\n    return <div />\n}"]},"metadata":{},"sourceType":"module"}
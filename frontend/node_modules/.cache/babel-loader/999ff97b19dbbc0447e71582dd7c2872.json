{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Zero2\\\\Desktop\\\\projeto\\\\syncimage\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Zero2\\\\Desktop\\\\projeto\\\\syncimage\\\\src\\\\componentes\\\\Upload\\\\Config\\\\index.js\";\nimport React, { useState } from 'react';\nimport Validaforms from \"../../../componentes/ValidaForms\";\nimport Alert from \"../../../componentes/Alert\";\nimport CompressImage from \"../../../componentes/compress\";\nimport axios from 'axios';\nimport Select from \"react-select\";\nconst user_id = localStorage.getItem(\"user_id\");\nexport default function Config(props) {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        title = _useState2[0],\n        setTitle = _useState2[1];\n\n  const _useState3 = useState('none'),\n        _useState4 = _slicedToArray(_useState3, 2),\n        categoria = _useState4[0],\n        setCategoria = _useState4[1];\n\n  const _useState5 = useState('publico'),\n        _useState6 = _slicedToArray(_useState5, 2),\n        privacy = _useState6[0],\n        setPrivacy = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        description = _useState8[0],\n        setDescription = _useState8[1];\n\n  const _useState9 = useState('Dasativado'),\n        _useState10 = _slicedToArray(_useState9, 2),\n        editionON = _useState10[0],\n        setEditionOn = _useState10[1]; // style Erro input\n\n\n  const _useState11 = useState(false),\n        _useState12 = _slicedToArray(_useState11, 2),\n        validaTitle = _useState12[0],\n        setValidaTitle = _useState12[1];\n\n  const _useState13 = useState(false),\n        _useState14 = _slicedToArray(_useState13, 2),\n        validaDescription = _useState14[0],\n        setValidaDescription = _useState14[1]; // alert\n\n\n  const _useState15 = useState(false),\n        _useState16 = _slicedToArray(_useState15, 2),\n        alertDisplay = _useState16[0],\n        setAlertDisplay = _useState16[1];\n\n  const _useState17 = useState([]),\n        _useState18 = _slicedToArray(_useState17, 2),\n        alertContext = _useState18[0],\n        setAlertContext = _useState18[1];\n\n  const image = props.data;\n\n  async function handleUpload(e) {\n    e.preventDefault();\n    const vTitle = Validaforms(title, 'titulo', {\n      min: 4,\n      max: 16\n    });\n    const vCategoria = Validaforms(categoria, 'categoria');\n    const vPrivacy = Validaforms(privacy, 'privacidade');\n    const vDescription = Validaforms(description, 'Descrição', {\n      min: 5,\n      max: 300\n    });\n    const vEditionOn = Validaforms(editionON, 'Edição automatica');\n\n    if (vTitle.length != 0) {\n      setAlertContext({\n        title: \"Falha ao salvar arquivo\",\n        messege: vTitle[0].messege\n      });\n      setValidaTitle(true);\n      setAlertDisplay(true);\n    }\n\n    if (vCategoria.length != 0) {\n      setAlertContext({\n        title: \"Falha ao salvar arquivo\",\n        messege: vCategoria[0].messege\n      });\n      setAlertDisplay(true);\n    }\n\n    if (vPrivacy.length != 0) {\n      setAlertContext({\n        title: \"Falha ao salvar arquivo\",\n        messege: vPrivacy[0].messege\n      });\n      setAlertDisplay(true);\n    }\n\n    if (vDescription.length != 0) {\n      setAlertContext({\n        title: \"Falha ao salvar arquivo\",\n        messege: vDescription[0].messege\n      });\n      setAlertDisplay(true);\n      setValidaDescription(true);\n    }\n\n    if (vEditionOn.length != 0) {\n      setAlertContext({\n        title: \"Falha ao salvar arquivo\",\n        messege: vEditionOn[0].messege\n      });\n      setAlertDisplay(true);\n    }\n\n    if (!image) {\n      setAlertContext({\n        title: \"Falha ao fazer upload\",\n        messege: \"Imagem invalida\"\n      });\n      setAlertDisplay(true);\n    }\n\n    if (image) {\n      if (image.size >= 1000000) {\n        setAlertContext({\n          title: \"Falha ao fazer upload\",\n          messege: \"O Tamanho da imagem não deve exceder 5mb\"\n        });\n        setAlertDisplay(true);\n      }\n\n      if (alertContext.length === 0) {\n        setValidaTitle(false);\n        setValidaDescription(false);\n      }\n\n      const info = {\n        user_id,\n        title,\n        description,\n        category: categoria,\n        privacy\n      };\n      const result = await CompressImage(image, 1);\n      const baseString = result.data;\n\n      try {\n        const response = await axios.post('http://localhost:3001/api/image', {\n          image: baseString,\n          info\n        });\n        console.log(response);\n      } catch (error) {\n        console.log(\"\".concat(error));\n      }\n    }\n  }\n\n  function handleCancelar(e) {\n    e.preventDefault();\n  }\n\n  const options = [{\n    value: \"Abe\",\n    label: \"Abe\",\n    customAbbreviation: \"A\"\n  }, {\n    value: \"John\",\n    label: \"John\",\n    customAbbreviation: \"J\"\n  }, {\n    value: \"Dustin\",\n    label: \"Dustin\",\n    customAbbreviation: \"D\"\n  }];\n\n  const formatOptionLabel = ({\n    value,\n    label,\n    customAbbreviation\n  }) => React.createElement(\"div\", {\n    style: {\n      display: \"flex\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, label), React.createElement(\"div\", {\n    style: {\n      marginLeft: \"10px\",\n      color: \"#ccc\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, customAbbreviation));\n\n  const CustomControl = () => React.createElement(Select, {\n    defaultValue: options[0],\n    formatOptionLabel: formatOptionLabel,\n    options: options,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }); // --------------------------------------------------------------------------------------\n\n\n  if (props.name == 'option' || !props.name) {\n    return React.createElement(\"div\", {\n      className: \"container-option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"title\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Titulo da imagem *\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"title\",\n      className: \"f-input\",\n      onChange: event => setTitle(event.target.value),\n      value: title != '' ? title : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"category\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Escolher categoria\"), React.createElement(CustomControl, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"privacy\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Definir privacidade\"), React.createElement(\"select\", {\n      id: \"privacy\",\n      onChange: event => setPrivacy(event.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"publico\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Publico\"), React.createElement(\"option\", {\n      value: \"privado\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Privado\"))), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: handleUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Salvar\"), React.createElement(\"button\", {\n      className: \"btn btn-none\",\n      onClick: handleCancelar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Cancelar\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Teve algum problema? tente o \", React.createElement(\"a\", {\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"upload normal\")), React.createElement(Alert, {\n      title: alertContext.title,\n      messege: alertContext.messege,\n      display: alertDisplay,\n      onClose: e => {\n        setAlertDisplay(false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }));\n  }\n\n  if (props.name == 'description') {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"container-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"description\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Defina um pequeno texto como descri\\xE7\\xE3o para sua imagem *\"), React.createElement(\"textarea\", {\n      id: \"description\",\n      className: \"f-textarea\",\n      onChange: event => setDescription(event.target.value),\n      value: description != '' ? description : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Deixar em branco\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"A descri\\xE7\\xE3o \\xE9 limitada a 300 caracteres, caso n\\xE3o queiera adicionar descri\\xE7\\xE3o, marque a op\\xE7\\xE3o acima.\")), React.createElement(Alert, {\n      title: alertContext.title,\n      messege: alertContext.messege,\n      display: alertDisplay,\n      onClose: e => {\n        setAlertDisplay(false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }));\n  }\n\n  if (props.name == 'avancado') {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"container-avancado\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"editionOn\",\n      className: \"f-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Tratamento automatico da imagem\"), React.createElement(\"select\", {\n      id: \"editionOn\",\n      onChange: event => setEditionOn(event.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"Dasativado\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"Dasativado\"), React.createElement(\"option\", {\n      value: \"Ativado\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, \"Ativado\")))), React.createElement(Alert, {\n      title: alertContext.title,\n      messege: alertContext.messege,\n      display: alertDisplay,\n      onClose: e => {\n        setAlertDisplay(false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }));\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268\n    },\n    __self: this\n  });\n}","map":{"version":3,"sources":["C:\\Users\\Zero2\\Desktop\\projeto\\syncimage\\src\\componentes\\Upload\\Config\\index.js"],"names":["React","useState","Validaforms","Alert","CompressImage","axios","Select","user_id","localStorage","getItem","Config","props","title","setTitle","categoria","setCategoria","privacy","setPrivacy","description","setDescription","editionON","setEditionOn","validaTitle","setValidaTitle","validaDescription","setValidaDescription","alertDisplay","setAlertDisplay","alertContext","setAlertContext","image","data","handleUpload","e","preventDefault","vTitle","min","max","vCategoria","vPrivacy","vDescription","vEditionOn","length","messege","size","info","category","result","baseString","response","post","console","log","error","handleCancelar","options","value","label","customAbbreviation","formatOptionLabel","display","marginLeft","color","CustomControl","name","event","target"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Validaforms from \"../../../componentes/ValidaForms\";\r\nimport Alert from \"../../../componentes/Alert\";\r\nimport CompressImage from \"../../../componentes/compress\";\r\nimport axios from 'axios';\r\nimport Select from \"react-select\";\r\n\r\n\r\nconst user_id = localStorage.getItem(\"user_id\");\r\n\r\nexport default function Config(props) {\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [categoria, setCategoria] = useState('none');\r\n    const [privacy, setPrivacy] = useState('publico');\r\n    const [description, setDescription] = useState('');\r\n    const [editionON, setEditionOn] = useState('Dasativado');\r\n\r\n    // style Erro input\r\n    const [validaTitle, setValidaTitle] = useState(false);\r\n    const [validaDescription, setValidaDescription] = useState(false);\r\n\r\n    // alert\r\n    const [alertDisplay, setAlertDisplay] = useState(false);\r\n    const [alertContext, setAlertContext] = useState([]);\r\n\r\n    const image = props.data;\r\n\r\n\r\n    async function handleUpload(e) {\r\n        e.preventDefault();\r\n\r\n        const vTitle = Validaforms(title, 'titulo', { min: 4, max: 16 })\r\n        const vCategoria = Validaforms(categoria, 'categoria')\r\n        const vPrivacy = Validaforms(privacy, 'privacidade')\r\n        const vDescription = Validaforms(description, 'Descrição', { min: 5, max: 300 })\r\n        const vEditionOn = Validaforms(editionON, 'Edição automatica')\r\n\r\n        if (vTitle.length != 0) {\r\n            setAlertContext({\r\n                title: \"Falha ao salvar arquivo\",\r\n                messege: vTitle[0].messege\r\n            })\r\n            setValidaTitle(true)\r\n            setAlertDisplay(true)\r\n\r\n        }\r\n\r\n        if (vCategoria.length != 0) {\r\n            setAlertContext({\r\n                title: \"Falha ao salvar arquivo\",\r\n                messege: vCategoria[0].messege\r\n            })\r\n            setAlertDisplay(true)\r\n        }\r\n\r\n        if (vPrivacy.length != 0) {\r\n            setAlertContext({\r\n                title: \"Falha ao salvar arquivo\",\r\n                messege: vPrivacy[0].messege\r\n            })\r\n            setAlertDisplay(true)\r\n        }\r\n\r\n        if (vDescription.length != 0) {\r\n            setAlertContext({\r\n                title: \"Falha ao salvar arquivo\",\r\n                messege: vDescription[0].messege\r\n            })\r\n            setAlertDisplay(true)\r\n            setValidaDescription(true)\r\n        }\r\n\r\n        if (vEditionOn.length != 0) {\r\n            setAlertContext({\r\n                title: \"Falha ao salvar arquivo\",\r\n                messege: vEditionOn[0].messege\r\n            })\r\n            setAlertDisplay(true)\r\n        }\r\n\r\n        if (!image) {\r\n            setAlertContext({\r\n                title: \"Falha ao fazer upload\",\r\n                messege: \"Imagem invalida\"\r\n            })\r\n            setAlertDisplay(true)\r\n\r\n        }\r\n\r\n\r\n        if (image) {\r\n            if (image.size >= 1000000) {\r\n                setAlertContext({\r\n                    title: \"Falha ao fazer upload\",\r\n                    messege: \"O Tamanho da imagem não deve exceder 5mb\"\r\n                })\r\n                setAlertDisplay(true)\r\n            }\r\n\r\n            if (alertContext.length === 0) {\r\n                setValidaTitle(false)\r\n                setValidaDescription(false)\r\n            }\r\n\r\n            const info = {\r\n                user_id,\r\n                title,\r\n                description,\r\n                category: categoria,\r\n                privacy,\r\n\r\n            }\r\n\r\n            const result = await CompressImage(image, 1);\r\n\r\n            const baseString = result.data;\r\n\r\n            try {\r\n                const response = await axios.post('http://localhost:3001/api/image', { image: baseString, info })\r\n                console.log(response);\r\n            } catch (error) {\r\n                console.log(`${error}`)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    function handleCancelar(e){\r\n        e.preventDefault();\r\n    }\r\n\r\n    \r\n    const options = [\r\n  { value: \"Abe\", label: \"Abe\", customAbbreviation: \"A\" },\r\n  { value: \"John\", label: \"John\", customAbbreviation: \"J\" },\r\n  { value: \"Dustin\", label: \"Dustin\", customAbbreviation: \"D\" }\r\n];\r\n\r\nconst formatOptionLabel = ({ value, label, customAbbreviation }) => (\r\n  <div style={{ display: \"flex\" }}>\r\n    <div>{label}</div>\r\n    <div style={{ marginLeft: \"10px\", color: \"#ccc\" }}>\r\n      {customAbbreviation}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n    const CustomControl = () => (\r\n        <Select\r\n        defaultValue={options[0]}\r\n        formatOptionLabel={formatOptionLabel}\r\n        options={options}\r\n        />\r\n    );\r\n\r\n// --------------------------------------------------------------------------------------\r\n\r\n\r\n\r\n    if (props.name == 'option' || !props.name) {\r\n\r\n        return (\r\n            <div className=\"container-option\">\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"title\" className=\"f-label\">Titulo da imagem *</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"title\"\r\n                        className='f-input'\r\n                        onChange={event => setTitle(event.target.value)}\r\n                        value={title != '' ? title : ''}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"category\" className=\"f-label\">Escolher categoria</label>\r\n                    <CustomControl />\r\n                </div>\r\n\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"privacy\" className=\"f-label\">Definir privacidade</label>\r\n                    <select\r\n                        id=\"privacy\"\r\n                        onChange={event => setPrivacy(event.target.value)}\r\n                    >\r\n                        <option value=\"publico\">Publico</option>\r\n                        <option value=\"privado\">Privado</option>\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"form-row\">\r\n                    <button className=\"btn btn-primary\" onClick={handleUpload}>Salvar</button>\r\n                    <button className=\"btn btn-none\" onClick={handleCancelar}>Cancelar</button>\r\n                </div>\r\n                \r\n                <span>Teve algum problema? tente o <a href=\"#\">upload normal</a></span>\r\n                <Alert\r\n                    title={alertContext.title}\r\n                    messege={alertContext.messege}\r\n                    display={alertDisplay}\r\n                    onClose={(e) => { setAlertDisplay(false) }}\r\n                />\r\n\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n\r\n\r\n    if (props.name == 'description') {\r\n        return (\r\n            <>\r\n                <div className=\"container-description\">\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"description\" className=\"f-label\">Defina um pequeno texto como descrição para sua imagem *</label>\r\n                        <textarea\r\n                            id=\"description\"\r\n                            className='f-textarea'\r\n                            onChange={event => setDescription(event.target.value)}\r\n                            value={description != '' ? description : ''}\r\n                        >\r\n                        </textarea>\r\n                    </div>\r\n\r\n                    <div className=\"form-row\">\r\n                        <input type=\"checkbox\"/>\r\n                        <span>Deixar em branco</span>\r\n                    </div>\r\n                    <span>A descrição é limitada a 300 caracteres, caso não queiera adicionar descrição, marque a opção acima.</span>\r\n                </div>\r\n                <Alert\r\n                    title={alertContext.title}\r\n                    messege={alertContext.messege}\r\n                    display={alertDisplay}\r\n                    onClose={(e) => { setAlertDisplay(false) }}\r\n                />\r\n            </>\r\n        )\r\n    }\r\n\r\n    if (props.name == 'avancado') {\r\n        return (\r\n            <>\r\n                <div className=\"container-avancado\">\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"editionOn\" className=\"f-label\">Tratamento automatico da imagem</label>\r\n                        <select id=\"editionOn\"\r\n                            onChange={event => setEditionOn(event.target.value)}\r\n                        >\r\n                            <option value=\"Dasativado\">Dasativado</option>\r\n                            <option value=\"Ativado\">Ativado</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <Alert\r\n                    title={alertContext.title}\r\n                    messege={alertContext.messege}\r\n                    display={alertDisplay}\r\n                    onClose={(e) => { setAlertDisplay(false) }}\r\n                />\r\n            </>\r\n        )\r\n    }\r\n\r\n    return <div />\r\n}"]},"metadata":{},"sourceType":"module"}